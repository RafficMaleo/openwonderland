<?xml version="1.0" encoding="UTF-8"?>
<project name="util.common" basedir="...">
    <!-- set the build-scripts directory to the current directory -->
    <dirname property="util.build-scripts.dir" file="${ant.file.util.common}"/>
    <property name="util.dir" location="${util.build-scripts.dir}/../.."/>
    <property name="top.dir" location="${core.dir}/.."/>
    
    <!-- import the main setup file -->
    <import file="${top.dir}/build-tools/build-scripts/build-setup.xml"/>
    
    <!-- Use my-build.properties to override default values in build.properties -->
    <property file="${current.dir}/my.build.properties"/>
    <property file="${core.dir}/my.build.properties"/>
    <property file="${core.dir}/build.properties"/>
    
    <property name="project.name" value="${ant.project.name}"/>
    
    <!-- Initialization - make dirs, unpack ext stuff... -->
    <target name="init">
        <mkdir dir="${build.classes.dir}"/>
        <mkdir dir="${build.lib.dir}"/>
    </target>
   
    <target name="-do-compile" depends="init">
        <wl-compile>
            <compile-classes>
                <include name="${util.src}/**"/>
            </compile-classes>
            
            <compile-classpath>
	    </compile-classpath>
        </wl-compile>
    </target>
   
    <target name="-do-jar" depends="-do-compile">
        <jar compress="${jar.compress}" jarfile="${build.lib.dir}/${util.jarname}.jar">   
            <fileset dir="${build.classes.dir}">
		<include name="${util.src}/**"/>
	    </fileset>
        </jar>
    </target>
    
    <target name="-do-clean">
        <delete dir="${build.dir}"/>
        <delete dir="data"/>
    </target>
</project>
