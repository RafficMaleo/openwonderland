<project basedir="." default="run" name="sasxremwin.run">
    <!-- set the build-scripts directory to the current directory -->
    <dirname property="current.dir" file="${ant.file.sas.xremwin.run}"/>

    <!-- override to fix library locations in core -->
    <property name="core.lib.dir" location="${current.dir}/core/lib"/>
    <property name="core.build.lib.dir" location="${current.dir}/core/lib"/>

    <!-- import common setup -->
    <import file="${current.dir}/build-tools/build-scripts/run-setup.xml"/>

    <!-- import core setup -->
    <import file="${current.dir}/core/build-tools/build-scripts/core-setup.xml"/>
   
    <target name="run">
        <exec command="chmod +x bin/runxremwin"/>
        <exec command="chmod +x bin/linux/Xvfb"/>
        <exec command="chmod +x bin/solaris/Xvfb"/>
        <java classname="org.jdesktop.wonderland.modules.sasxremwin.provider.SasXrwProviderMain"
              fork="true">
            <classpath>
                <path location="${current.dir}/lib/sasxremwin-provider.jar"/>
                <path location="${current.dir}/lib/appbase-client.jar"/>
                <path location="${current.dir}/lib/xremwin-client.jar"/>
                <path location="${current.dir}/lib/escher-0.2.2.lg.jar"/>
                <path location="${current.dir}/lib/sas-provider.jar"/>

                <!-- core stuff we need -->
                <pathelement path="${core-client.classpath}"/>
            </classpath>

            <jvmarg value="-Djava.util.logging.config.file=logging.properties"/>

            <sysproperty key="java.library.path" value="${current.dir}/lib/${ostype}/native"/>
            <sysproperty key="wonderland.web.server.url" value="${wonderland.web.server.url}"/>
        </java>
    </target>
</project>
